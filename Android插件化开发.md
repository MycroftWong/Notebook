# Android 插件化开发

公司在做一款游戏SDK的项目，因为在上一家公司参与过同样的项目，所以实现上来说并没有太多阻力。不过在和游戏研发接入阶段接触了其他几款SDK，如小七SDK，果盘SDK，从使用插件化来说，我们的SDK还是比较落后的。

## 分析

### 小七SDK

小七SDK可以认为是Android比较早期的插件化实现方式，这种实现方式比较简单，在手机中安装一款插件APP，这个APP没有启动页面，所以不能由用户来启动，如果SDK需要更新，那么就相当于更新一款APP而已。

很早之前，我在京东商城APP中也看到过这种实现，它其中的客服功能就是使用这种方式来实现的，如果需要客服功能，京东商城会提示用户安装一款京东客服插件(名字可能不对)，但是我没有在手机桌面上找到该APP，直到在安装列表中才找到这款没有“打开”按钮的APP。

个人认为，这种实现方式虽然简单，但是也比较实用。本身而言，它没有其他插件实现的任何限制，完全能够作为一款独立的APP来使用。而且如果多款游戏接入同一SDK，那么只有一份插件，唯一需要处理的是，多款游戏启动这一个APP产生的冲突。而另外唯一可能不友好的是，用户会觉得这种实现比较“不安全”，“突兀”等等，安装了一款“看不见”的APP，心里或许有些疙瘩。

### 果盘SDK

果盘SDK的插件化实现就可以认为是目前最流行的实现，不用另外安装APP，而是将apk作为插件，在宿主中加载插件apk, 完全运行在宿主上。

这种方式是目前的趋势，作为一款大型的APP，发展到一定阶段，必然会使用到插件化的功能，常常使用的也就是这种方式。不过因为它的实现很复杂，遇到很多问题需要解决。如下：
1. 如果加载插件中的组件(Activity, Service)
2. 插件apk中的资源访问
3. 宿主和插件资源冲突

其他还有很多问题需要解决。其中最麻烦的是，因为安卓平台的原因，组件是需要在安装时进行注册的，所以插件中的组件不能直接进行加载。

个人认为，虽然这种方式麻烦，但是这必然是一个“高级”安卓开发需要了解的知识点。

## 参考

[Android应用程序插件化研究之DexClassLoader](http://www.jianshu.com/p/43a8a9b932de)

[Android应用程序插件化研究之AssetManager](http://www.jianshu.com/p/c8c03bdd11e3)

[插件化研究之Activity注册](http://www.jianshu.com/p/f8c646dab337)

[http://www.jianshu.com/p/7a9d52e73d05](http://www.jianshu.com/p/7a9d52e73d05)

[插件化研究之资源冲突](http://www.jianshu.com/p/913330114752)

[DL动态加载框架技术文档](http://blog.csdn.net/singwhatiwanna/article/details/40283117)






















































<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
